# Cell Type Transcription Factor Driver Analysis Configuration
# Template configuration file for the analysis pipeline

# Required Parameters
cell_type_a: "fibroblast"           # Name of cell type A
cell_type_b: "cardiomyocyte"        # Name of cell type B
genome_assembly: "hg38"             # Genome assembly (hg38, mm10, etc.)
species: "human"                    # Species (human, mouse, etc.)

# File Paths
input_directory: "/path/to/input/data"
output_directory: "/path/to/output/results"

# Required Files
atac_peak_a: "ATAC_peak_fibroblast.bed"
atac_peak_b: "ATAC_peak_cardiomyocyte.bed"
h3k27ac_peak_a: "H3K27ac_peak_fibroblast.bed"
h3k27ac_peak_b: "H3K27ac_peak_cardiomyocyte.bed"
genome_fasta: "hg38.fa"
meme_database: "human.meme"

# Optional RNA-seq Files (for enhanced analysis)
rna_seq_counts: null                # Count matrix file
rna_seq_metadata: null              # Sample metadata

# Analysis Parameters

## Differential Accessibility
peak_overlap_threshold: 0.5         # Minimum reciprocal overlap for peaks
fold_change_threshold: 1.5          # Minimum fold change for differential peaks
fdr_threshold: 0.05                 # FDR threshold for significance

## Motif Enrichment
fimo_pvalue_threshold: 1e-4         # P-value threshold for motif scanning
background_size_multiplier: 10      # Size of background relative to foreground
enrichment_fdr_threshold: 0.05      # FDR threshold for motif enrichment
homer_parameters:                   # Enhanced HOMER parameters
  size: "given"                     # Use original peak sizes
  mask: true                        # Mask repetitive regions
  preparse: true                    # Preparse sequences
  nomotif: true                     # Skip de novo motif discovery
  find: true                        # Use known motif database

## Integration Weights
weight_motif_enrichment: 0.4        # Weight for motif enrichment score
weight_accessibility_change: 0.3    # Weight for accessibility change
weight_enhancer_activity: 0.2       # Weight for enhancer activity
weight_expression_change: 0.1       # Weight for expression change (if RNA-seq available)

# Quality Control
min_peak_size: 100                  # Minimum peak size (bp)
max_peak_size: 1000                 # Maximum peak size (bp)
min_peak_count: 1000                # Minimum number of peaks per cell type

# Output Options
generate_plots: true                # Generate visualization plots
save_intermediate_files: false      # Save intermediate analysis files
create_summary_report: true         # Create comprehensive summary report

# Performance Settings
num_threads: 4                      # Number of threads for parallel processing
memory_limit_gb: 16                 # Memory limit in GB
chunk_size: 1000000                 # Chunk size for large file processing

# Example Usage:
# python scripts/tf_driver_analysis.py \
#   --atac-a ATAC_peak_fibroblast.bed \
#   --atac-b ATAC_peak_cardiomyocyte.bed \
#   --h3k27ac-a H3K27ac_peak_fibroblast.bed \
#   --h3k27ac-b H3K27ac_peak_cardiomyocyte.bed \
#   --genome-fasta hg38.fa \
#   --meme-db human.meme \
#   --output-dir ./results \
#   --cell-type-a fibroblast \
#   --cell-type-b cardiomyocyte